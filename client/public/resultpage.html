<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Personal Color AI - 결과 페이지</title>
  <link rel="stylesheet" href="resultpage.css">
</head>
<body>
  <div class="app-container">
    <h1 class="title">Result</h1>
    <div class="result-page">
      <img id="uploadedImage" alt="Uploaded Image" class="uploaded-image" />
      <h2>당신의 퍼스널 컬러는</h2>
      <h2 id="personalColor" class="personal-color"></h2>

      <!-- 퍼스널 컬러에 맞는 색상 받아와서 무신사 페이지 출력 -->
      <div class="fashion-items-container" style="display: flex; gap: 20px;">
        <div class="fashion-item" style="flex: 1;">
          <h3>상의 추천</h3>
          <iframe 
            id="topRecommendation" 
            title="Top Items" 
            style="width: 100%; height: 1000px; border: none; overflow: auto;"
          ></iframe>
        </div>
        <div class="fashion-item" style="flex: 1;">
          <h3>하의 추천</h3>
          <iframe 
            id="bottomRecommendation"
            title="Bottom Items" 
            style="width: 100%; height: 1000px; border: none; overflow: auto;"
          ></iframe>
        </div>
      </div>
      <button onclick="goBack()" class="back-button">뒤로 가기</button>
    </div>
  </div>

  <script>
    // 이미지 미리보기와 퍼스널 컬러 출력
    const previewURL = localStorage.getItem('previewURL');
    if (previewURL) {
      document.getElementById('uploadedImage').src = previewURL;
    }
    const personalColor = localStorage.getItem('personalColor');
    document.getElementById('personalColor').textContent = personalColor;

    // 퍼스널 컬러에 맞는 무신사 색상 필터 설정
    const colorCodes = {
      "Spring Warm": "5%2C9%2C12%2C23%2C29%2C31%2C32%2C44%2C45%2C56%2C77",
      "Summer Cool": "3%2C7%2C24%2C32%2C37%2C39%2C45%2C48%2C57%2C58",
      "Autumn Warm": "4%2C12%2C26%2C28%2C30%2C34%2C35%2C49%2C78%2C83%2C84",
      "Winter Cool": "1%2C2%2C11%2C13%2C25%2C36%2C49%2C51%2C59%2C60%2C73%2C80%2C81"
    };

    // 퍼스널 컬러 타입에 맞는 색상 코드로 상의와 하의 추천 URL 설정
    const colorFilter = colorCodes[personalColor] || "1"; // 퍼스널컬러 없으면 흰색
    document.getElementById('topRecommendation').src = `https://www.musinsa.com/category/001?gf=A&color=${colorFilter}`;
    document.getElementById('bottomRecommendation').src = `https://www.musinsa.com/category/003?gf=A&color=${colorFilter}`;
    
    //뒤로가기 버튼
    function goBack() {
      window.location.href = '/';
    }
  </script>
</body>
</html>
